<%- include('./partials/header'); -%>

    <h1>Details </h1>
    <div>
        <form action="/movie-details/<%= movie._id %>" method="post">
          <legend>Modifie le film</legend>
          <label for="movietitle">Titre du Film</label>
          <input class="bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none leading-normal" type="text" name="movietitle" value="<%= movie.movietitle %>">
          <label for="movieyear">Ann√©e</label>
          <input class="bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none leading-normal" type="text" name="movieyear" value="<%= movie.movieyear %>">
        
          <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" type="submit">
            MAJ
          </button>
        </form>
        <button class="bg-blue-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" type="submit" id="btnSuppr">
          Supprimer
        </button>
      </div>
      <script>
       var btnSuppr = document.getElementById('btnSuppr')
       btnSuppr.addEventListener('click',deleteDocument)

       function deleteDocument() {
         var movieId = <%- JSON.stringify(movie._id) %>;
         var url = '/movie-details/' + movieId
         axios.delete(url)
         .then(function (response) {
             window.location = '/movies'
         })
         .catch(function (error) {
           console.error(error);
           
         })
       }

      </script>

      <%- include('./partials/footer'); -%>